{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\actc\\\\store\\\\src\\\\components\\\\providers\\\\cart-provider.component.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer } from 'react';\nimport { useContext } from 'react';\nimport { useEffect } from 'react';\nimport { reducer } from '../../reducers/cart';\nimport { UserContext } from './user-provider.component';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/React.createContext(null);\n\nconst getCartFromLocalStorage = email => {\n  const map = JSON.parse(localStorage.getItem('cartMap') || '{}');\n  const key = email || 'anonymous';\n  const cart = map[key] || [];\n  return cart;\n};\n\nconst updateCartInLocalStorage = (email, cart) => {\n  const map = JSON.parse(localStorage.getItem('cartMap') || '{}');\n  const key = email || 'anonymous';\n  map[key] = cart;\n  localStorage.setItem('cartMap', JSON.stringify(map));\n};\n/**\r\n * @param {{\r\n *  children: React.ReactNode;\r\n * }} props Component props\r\n */\n\n\nconst CartProvider = props => {\n  _s();\n\n  const userContext = useContext(UserContext);\n  const user = userContext.user;\n  const cartFromLocalStorage = getCartFromLocalStorage(user === null || user === void 0 ? void 0 : user.email);\n  const [cart, dispatch] = useReducer(reducer, cartFromLocalStorage);\n  useEffect(() => updateCartInLocalStorage(user === null || user === void 0 ? void 0 : user.email, cart), [cart]);\n  useEffect(() => dispatch({\n    type: 'SET',\n    cart: getCartFromLocalStorage(user === null || user === void 0 ? void 0 : user.email)\n  }), [user]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      dispatch\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CartProvider, \"TmZssy5TVGGtI2JYpEfZly/1IJc=\");\n\n_c = CartProvider;\nexport default CartProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","useReducer","useContext","useEffect","reducer","UserContext","CartContext","createContext","getCartFromLocalStorage","email","map","JSON","parse","localStorage","getItem","key","cart","updateCartInLocalStorage","setItem","stringify","CartProvider","props","userContext","user","cartFromLocalStorage","dispatch","type","children"],"sources":["C:/Users/actc/store/src/components/providers/cart-provider.component.jsx"],"sourcesContent":["import React, { useReducer } from 'react';\r\nimport { useContext } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { reducer } from '../../reducers/cart';\r\nimport { UserContext } from './user-provider.component';\r\n\r\nexport const CartContext = React.createContext(null);\r\n\r\nconst getCartFromLocalStorage = email => {\r\n  const map = JSON.parse(localStorage.getItem('cartMap') || '{}');\r\n  const key = email || 'anonymous';\r\n  const cart = map[key] || [];\r\n  return cart;\r\n};\r\n\r\nconst updateCartInLocalStorage = (email, cart) => {\r\n  const map = JSON.parse(localStorage.getItem('cartMap') || '{}');\r\n  const key = email || 'anonymous';\r\n  map[key] = cart;\r\n  localStorage.setItem('cartMap', JSON.stringify(map));\r\n};\r\n\r\n/**\r\n * @param {{\r\n *  children: React.ReactNode;\r\n * }} props Component props\r\n */\r\nconst CartProvider = (props) => {\r\n  const userContext = useContext(UserContext);\r\n  const user = userContext.user;\r\n  const cartFromLocalStorage = getCartFromLocalStorage(user?.email);\r\n\r\n  const [cart, dispatch] = useReducer(reducer, cartFromLocalStorage);\r\n\r\n  useEffect(() => updateCartInLocalStorage(user?.email, cart), [cart]);\r\n\r\n  useEffect(() => dispatch({ type: 'SET', cart: getCartFromLocalStorage(user?.email) }), [user]);\r\n\r\n  return (\r\n    <CartContext.Provider value={{ cart, dispatch }}>\r\n      {props.children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CartProvider;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,OAAT,QAAwB,qBAAxB;AACA,SAASC,WAAT,QAA4B,2BAA5B;;AAEA,OAAO,MAAMC,WAAW,gBAAGN,KAAK,CAACO,aAAN,CAAoB,IAApB,CAApB;;AAEP,MAAMC,uBAAuB,GAAGC,KAAK,IAAI;EACvC,MAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,KAAmC,IAA9C,CAAZ;EACA,MAAMC,GAAG,GAAGN,KAAK,IAAI,WAArB;EACA,MAAMO,IAAI,GAAGN,GAAG,CAACK,GAAD,CAAH,IAAY,EAAzB;EACA,OAAOC,IAAP;AACD,CALD;;AAOA,MAAMC,wBAAwB,GAAG,CAACR,KAAD,EAAQO,IAAR,KAAiB;EAChD,MAAMN,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,KAAmC,IAA9C,CAAZ;EACA,MAAMC,GAAG,GAAGN,KAAK,IAAI,WAArB;EACAC,GAAG,CAACK,GAAD,CAAH,GAAWC,IAAX;EACAH,YAAY,CAACK,OAAb,CAAqB,SAArB,EAAgCP,IAAI,CAACQ,SAAL,CAAeT,GAAf,CAAhC;AACD,CALD;AAOA;AACA;AACA;AACA;AACA;;;AACA,MAAMU,YAAY,GAAIC,KAAD,IAAW;EAAA;;EAC9B,MAAMC,WAAW,GAAGpB,UAAU,CAACG,WAAD,CAA9B;EACA,MAAMkB,IAAI,GAAGD,WAAW,CAACC,IAAzB;EACA,MAAMC,oBAAoB,GAAGhB,uBAAuB,CAACe,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEd,KAAP,CAApD;EAEA,MAAM,CAACO,IAAD,EAAOS,QAAP,IAAmBxB,UAAU,CAACG,OAAD,EAAUoB,oBAAV,CAAnC;EAEArB,SAAS,CAAC,MAAMc,wBAAwB,CAACM,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEd,KAAP,EAAcO,IAAd,CAA/B,EAAoD,CAACA,IAAD,CAApD,CAAT;EAEAb,SAAS,CAAC,MAAMsB,QAAQ,CAAC;IAAEC,IAAI,EAAE,KAAR;IAAeV,IAAI,EAAER,uBAAuB,CAACe,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEd,KAAP;EAA5C,CAAD,CAAf,EAA8E,CAACc,IAAD,CAA9E,CAAT;EAEA,oBACE,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAAEP,IAAF;MAAQS;IAAR,CAA7B;IAAA,UACGJ,KAAK,CAACM;EADT;IAAA;IAAA;IAAA;EAAA,QADF;AAKD,CAhBD;;GAAMP,Y;;KAAAA,Y;AAkBN,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}